<!DOCTYPE html>
<html>

<head>
    <title>Crowdemotion JS rest api</title>
</head>

<body>
    <script src="../src/jquery.min.js"></script>
    <script src="../src/sha256.js"></script>
    <script src="../src/enc-base64-min.js"></script>
    <script src="../src/store.js"></script>
    <script src="../src/CEClient.js"></script>
    <script>
        $(document).ready(function() {

            var ceclient = new CEClient();
            ceclient.init(true, true);

            //LOGOUT
            var execLogout = function(res) {
                console.log('Results from timeseries');
                console.log(res);
                console.log('LOGOUT');
                ceclient.logout();
            };

            $('#sendbutton').click(function() {
                //ceclient.sendFile("fileinput");
                //LOGIN
                console.log('LOGGING IN');
                ceclient.login($('#username').val(), $('#password').val(),
                    function(loginSuccessful) {
                        //UPLOAD VIDEO
                        if (loginSuccessful) {
                          ceclient.uploadFormAsync('form_upload', function (response) {
                              $('#resultVideoUpload').text(JSON.stringify(response));
                          });
                        } else {
                          console.log(ceclient.errorlog);
                        }
                    });
            });
        });
    </script>

    <div style="margin-bottom:20px;">
      <form id="form_upload" method="post" enctype="multipart/form-data">
          <input id="username" placeholder="username" type="text" required="required">
          <input id="password" placeholder="password" type="password" required="required">
          <input type="file" name="filename" id="filename" />
          <input type="button" id="sendbutton" value="send">
      </form>
    </div>

    <div class="">
      Result:
      <br/>
      <textarea id="resultVideoUpload" style="margin: 0px; width: 488px; height: 60px;"></textarea>
    </div>

</body>

</html>
